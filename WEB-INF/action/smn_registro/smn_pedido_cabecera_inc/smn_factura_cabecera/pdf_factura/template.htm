<!DOCTYPE html>
<html>
<head>
	<title>Factura</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<!-- <link rel="stylesheet" type="text/css" href="${def:context}/dinamica_bkp.css" /> -->
	<!-- <link rel="stylesheet" type="text/css" href="${def:context}/main.css" />	 -->
	<!-- <link rel="stylesheet" type="text/css" href="${def:context}/pdf.css"> -->
	<link rel="stylesheet" type="text/css" href="${def:context}/pdf.css">
	<script type="text/javascript" src="${def:context}/action/script"></script>
	<script type="text/javascript" src="${def:context}/action/jquery"></script>
   	<script type="text/javascript" src="${def:context}/action/jqueryi"></script>
	</head>
<body>
	<form id="facturas" style="width:1000px; background: #fff;  box-shadow: 0px 0px 0px #fff;">

		<div class="banner">
			<div class="datos">
				<p>Paciente: ${fld:paciente}</p>
				<p>Paciente Rif: ${fld:rif_paciente}</p>
				<p>Pagador: ${fld:pagador}</p>
				<p>Pagador Rif: ${fld:rif_pagador}</p>
				<p>Pagador Direccion: ${fld:direccion_pagador} </p>
				<p>M&eacute;dico: ${fld:medico}</p>
			</div>
			<div class="datos">
				<p>Numero Documento: ${fld:nro_doc}</p>
				<p>Fecha Documento: ${fld:fecha_documento}</p>
				<p>Fecha Vencimiento: ${fld:fecha_vencimiento}</p>
				<p>Fecha Ingreso: ${fld:fecha_ingreso}</p>
				<p>Numero Autorizacion: ${fld:nro_autorizacion}</p>
				<p>Monto Autorizado: ${fld:monto_autorizado}</p>
			</div>
		</div>

		<!-- <table align="left" style="margin-bottom: 30px;" >
			<thead>
				<tr>
					<td style=" font-weight: bold;">Paciente: ${fld:nombre_paciente}</td>
				</tr>
				<tr>
					<td style=" font-weight: bold;">CI.: ${fld:cedula}</td>
				</tr>
				<tr>
					<td style=" font-weight: bold;">RIF: ${fld:rif}</td>
				</tr>
				<tr>
					<td style=" font-weight: bold;">Domicilio: ${fld:direccion}</td>
				</tr>
				<tr></tr>
				<tr>
					<td style=" font-weight: bold;">Responsable: ${fld:pre_tipo}</td>
				</tr>
				<tr>
					<td style=" font-weight: bold;">M&eacute;dico: ${fld:medico}</td>
				</tr>
				<tr>
					<td style=" font-weight: bold;">Intervenciones: ${fld:patologia}</td>
				</tr>
			</thead>
		</table> -->
		<!-- <br>
		<br> -->
		<div>
			<table class="table table-fixed" style="width:95%; font-size: 7; margin-top: 50px">
				<thead >
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td align="right"></td>
					</tr>

				</thead>
				<tbody>
					
					<!--<rows>
						<tr style="font-size: 7">
							<td style="font-weight: bold; font-size: 7;">${fld:grupo_titulo}</td>
							<td align="left">${fld:componentes}</td>
							<td align="right"></td>	
							<td align="right">$</td>	
							<td align="right">${fld:prc_monto_neto_ma@#,###,##0.00}</td>
						</tr>	
					</rows>
					<rows2>
					<tr>
						<td align="right" style=" font-weight: bold; font-size: 7; margin-right: 280px;">SUB-TOTAL</td>
						<td></td>
						<td></td>
						<td></td>
						<td align="right" style=" font-weight: bold; font-size: 7">${fld:submontoma@#,###,##0.00}</td>
					</tr>
					</rows2>
					<tr>
						<td align="right" style=" font-weight: bold; font-size: 7; margin-right: 280px;">TOTAL</td>
						<td></td>
						<td></td>
						<td></td>
						<td align="right" style=" font-weight: bold; font-size: 7">${fld:netoma@#,###,##0.00}</td>
					</tr>-->


				</tbody>
			</table>
			<div id="tbody" class="final">
				
			</div>
		</div>		
		<br>
		<br>
		<!-- <div align="center">
			<button id="imprimir" onclick="imprimir();">Imprimir</button>
		</div> -->
	</form>
</body>
</html>

<script type="text/javascript" >
  	onload = function() {

  		//document.getElementById('imprimir').style.display='none';
  		$('#facturas').printThis({
  			debug: false,               // show the iframe for debugging
		    importCSS: true,            // import parent page css
		    importStyle: true,         // import style tags
		    printContainer: true,       // print outer container/$.selector
		    loadCSS: "/pdf.css",                // path to additional css file - use an array [] for multiple
		    pageTitle: "Presupuesto",              // add title to print page
		    removeInline: true,        // remove inline styles from print elements
		    removeInlineSelector: "*",  // custom selectors to filter inline styles. removeInline must be true
		    printDelay: 333,            // variable print delay
		    header: null,               // prefix to html
		    footer: null,               // postfix to html
		    base: false,                // preserve the BASE tag or accept a string for the URL
		    formValues: false,           // preserve input/form values
		    canvas: false,              // copy canvas content
		    doctypeString: '...',       // enter a different doctype for older markup
		    removeScripts: true,       // remove script tags from print content
		    copyTagClasses: false,      // copy classes from the html & body tag
		    beforePrintEvent: null,     // function for printEvent in iframe
		    beforePrint: null,          // function called before iframe is filled
		    afterPrint: null            // function called before iframe is removed
  		});

  		let myTable="";
  		let cont=0;
  		let subtotal_monto_neto_ml=0;
  		let total_monto_neto_ml=0;
		
		myTable+="<table>";
  		<grupotitulo>
			myTable+="<tr style='font-size: 7'>";
			myTable+="<td style='font-weight: bold; font-size: 7;' colspan='2'>${fld:grupo_titulo}</td>";
			myTable+="</tr>";
			<detalle>
	  			if("${fld:titulo_id}"=="${fld:smn_grupo_titulo_impresion_id}")
				{
					subtotal_monto_neto_ma+=parseFloat("${fld:monto@#,###,##0.00}");
					myTable+="<tr>";
					myTable+="<td align='left'>${fld:componentes}</td>";
					myTable+="<td align='right'>$ ${fld:monto@#,###,##0.00}</td>";
					myTable+="</tr>";
				}
	  		</detalle>
	  		myTable+="<tr>";
	  		myTable+="<td align='right' style='font-weight: bold; font-size: 7; margin-right: 280px;'>SUB SUB-TOTAL</td>";
	  		myTable+="<td align='right' style='font-weight: bold; font-size: 7'>$ "+subtotal_monto_neto_ml.toFixed(2)+"</td>";
	  		myTable+="</tr>";
			total_monto_neto_ml+=subtotal_monto_neto_ml;
			subtotal_monto_neto_ml=0;
			cont++;
		</grupotitulo>
		myTable+="<tr>";
		myTable+="<td align='right' style='font-weight: bold; font-size: 7; margin-right: 280px;'>TOTAL</td>";
		myTable+="<td align='right' style='font-weight: bold; font-size: 7'>$ "+total_monto_neto_ml.toFixed(2)+"</td>";
		myTable+="</tr>";
		myTable+="</table>";
		document.getElementById('tbody').innerHTML = myTable;
  	}
</script>


